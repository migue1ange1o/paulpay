<html>
<head>
    
    <h2>XMR Superchat</h2>
    <link href=xmr.svg rel=icon>
    <link href=sol.svg rel=icon>
    <link href=style.css rel=stylesheet>
   

    <script>
        var buttonText = "Change to Monero";
        function toggleText() {
          var elements = document.querySelectorAll('h2, label, input, textarea, button');
          elements.forEach(function(element) {
              if (element.innerHTML.includes("Monero")) {
                  element.innerHTML = element.innerHTML.replace(/Monero/g, "Solana");
              } else if (element.innerHTML.includes("monero")) {
                  element.innerHTML = element.innerHTML.replace(/monero/g, "solana");
              } else if (element.innerHTML.includes("Solana")) {
                  element.innerHTML = element.innerHTML.replace(/Solana/g, "Monero");
              } else if (element.innerHTML.includes("solana")) {
                  element.innerHTML = element.innerHTML.replace(/solana/g, "monero");
              }
            
            if (element.innerHTML.includes("XMR")) {
                  element.innerHTML = element.innerHTML.replace(/XMR/g, "SOL");
              } else if (element.innerHTML.includes("SOL")) {
                  element.innerHTML = element.innerHTML.replace(/SOL/g, "XMR");
              } 
          });
          
          var button = document.getElementById("toggleButton");
          if (buttonText === "Switch to Monero") {
              buttonText = "Switch to Solana";
          } else {
              buttonText = "Switch to Monero";
          }
          button.innerHTML = buttonText;
          
          var img = document.querySelector("#currencyIcon");
          if (img.getAttribute("src") === "xmr.svg") {
            img.setAttribute("src", "sol.svg");
          } else {
            img.setAttribute("src", "xmr.svg");
          }

      }
      
      fetch("https://api.coingecko.com/api/v3/simple/price?ids=monero,solana&vs_currencies=usd")
      .then(response => response.json())
      .then(data => {
          document.getElementById("xmrToUsd").innerHTML = data.monero.usd;
          document.getElementById("solToUsd").innerHTML = data.solana.usd;
      });
      
      
      
    </script>
</head>

<body>


    <h2>Tribute Your God In Monero.</h2>
    <hr><br><br><br>
    
    <label for="name">Paypig Name:</label><br>
    <input id="name" maxlength="25" name="name" placeholder="Anonymous" type="text"><br>
    <label for="amount">Monero (XMR) Amount:</label><br>
    <input id="amount" min="{{.MinAmnt}}" name="amount" placeholder="{{.MinAmnt}} Minimum" step="0.0001" type="number">
    <label for="message">Message:</label><br>
    <textarea id="message" maxlength="{{.MaxChar}}" name="message" placeholder="{{.MaxChar}} character max" rows="6"></textarea><br>
  <label for="media">Media (Optional) - Minimum donation of $5:</label><br>
  
    <input id="media" name="media" type="text" placeholder="YouTube link"><br><br>
    
  <form action="/pay" method="POST">
    
    <button id="submit" type="submit" data-original-text="Pay in Monero(XMR)">
      <img id="currencyIcon" src="xmr.svg">Monero Tribute
    </button>
    
    <input id="showAmount" name="showAmount" type="checkbox" value="true" {{.Checked}}>
    <small><label for="showAmount">Show amount on stream?</label><small>
      
    
    <button id="toggleButton" type="button" onclick="toggleText()">Switch to Solana</button>
    <div id="currencyRates">
      <p style="display: inline-block;">1 XMR = $<span id="xmrToUsd"></span></p>
      <p style="display: inline-block; margin-left: 15px;">1 SOL = $<span id="solToUsd"></span></p>
      </div>
  </form>
      
</body>

</html>
